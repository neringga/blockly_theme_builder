<!DOCTYPE html>
<html style="height: 100%;">
  <head>

    <meta charset="utf-8" />

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="../blockly/blockly_compressed.js"></script>
    <script src="../blockly/blocks_compressed.js"></script>
    <script src="../blockly/msg/js/en.js"></script>
    <script src="../blockly/php_compressed.js"></script>
    <script src="../blockly/generators/php/custom_helper.js"></script>
    <script src="../blockly/blocks/custom.js"></script>

    <script src="../blockly/blocks/custom_templates.js"></script>
    <script src="../blockly/blocks/custom_content_items.js"></script>
    <script src="../blockly/blocks/custom_child_components.js"></script>
    <script src="../blockly/blocks/custom_configuration.js"></script>
    <script src="../blockly/blocks/custom_layout.js"></script>

    <script src="../blockly/generators/php/custom.js"></script>
    <script src="jszip/dist/jszip.js"></script>
    <script src="jszip/vendor/FileSaver.js"></script>

    <script src="blockly_script.js"></script>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- boootstap -->

  </head>

  <body style="height: 100%;">

    <table style="width:100%; height: 90%; table-layout:fixed;">
      <tr>
        <td style="width:50%; height: 100%;">

          <button type="button" class="btn btn-success" onclick="showCode()" style="margin: 10px;">Generate theme</button>

          <div id="blocklyDiv" style="height: 95%; width: 100%;"></div>

        </td>
        <td style="width:50%; height: 100%;">

          <div class="btn-group btn-group-toggle" data-toggle="buttons" style="margin: 5px;">
            <label class="btn btn-secondary active">
              <input type="radio" name="options" id="option_code" autocomplete="off" checked> Code
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="options" id="option_demo" autocomplete="off"> Live demo
            </label>
          </div>

            <textarea id="codearea" readonly style="height: 95%; width: 100%;"></textarea>
            <iframe id="iframe_wordpress" src="http://localhost/testsite/" title="Live theme demo" style="height: 95%; width: 100%;"></iframe>

        </td>
      </tr>
    </table>

  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <category name="Text">
      <block type="text">
        <field name="TEXT"></field>
      </block>
    </category>
    <category name="Colour" colour="#a5745b">
      <block type="colour_picker">
        <field name="COLOUR">#ff0000</field>
      </block>
    </category>
    <sep></sep>
    <category name="Templates">
      <block type="index"></block>
      <block type="home"></block>
      <block type="header"></block>
      <block type="footer"></block>
      <block type="page"></block>
      <block type="single"></block>
      <block type="archive"></block>
      <block type="search"></block>
      <block type="404"></block>
    </category>
    <category name="Layout">
      <block type="row"></block>
      <block type="column"></block>
    </category>
    <category name="Child components">
      <block type="empty_statement"></block>
      <block type="page_content"></block>
      <block type="text_custom"></block>
      <block type="image"></block>
      <block type="search_field"></block>
      <block type="posts"></block>
      <block type="records"></block>
    </category>
    <category name="Post items">
      <block type="item_title"></block>
      <block type="item_content"></block>
      <block type="item_excerpt"></block>
    </category>
    <category name="Configuration">
      <block type="empty_value"></block>
      <block type="pixels"></block>
      <block type="percents"></block>
      <block type="text_style"></block>
      <block type="content_margin"></block>
      <block type="display_style"></block>
      <block type="border"></block>
      <block type="padding"></block>
    </category>
    <sep></sep>
    <category name="Configuration examples">

      <block type="text_style">
        <field name="font_style">normal</field>
        <field name="font_weight">normal</field>
        <field name="font_size">12</field>
        <field name="alignment">left</field>
        <field name="transformation">0</field>
        <value name="font_family">
          <block type="text">
            <field name="TEXT">Arial</field>
          </block>
        </value>
        <value name="background_color">
          <block type="empty_value"></block>
        </value>
        <value name="color">
          <block type="colour_picker">
            <field name="COLOUR">#ff0000</field>
          </block>
        </value>
      </block>

      <block type="content_margin">
        <value name="left_margin">
          <block type="percents">
            <field name="percents">0</field>
          </block>
        </value>
        <value name="right_margin">
          <block type="percents">
            <field name="percents">0</field>
          </block>
        </value>
        <value name="top_margin">
          <block type="percents">
            <field name="percents">0</field>
          </block>
        </value>
        <value name="bottom_margin">
          <block type="percents">
            <field name="percents">0</field>
          </block>
        </value>
      </block>

      <block type="display_style">
        <value name="margins">
          <block type="content_margin">
            <value name="left_margin">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="right_margin">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="top_margin">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="bottom_margin">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
          </block>
        </value>
        <value name="padding">
          <block type="padding">
            <value name="left">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="right">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="top">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
            <value name="bottom">
              <block type="percents">
                <field name="percents">0</field>
              </block>
            </value>
          </block>
        </value>
        <value name="border">
          <block type="border">
            <value name="border_width">
              <block type="pixels">
                <field name="pixels">0</field>
              </block>
            </value>
          </block>
        </value>
      </block>

    </category>

    <category name="Layout examples">
      <block type="row">
        <statement name="input">
          <block type="column">
            <field name="width">6</field>
            <next>
              <block type="column">
                <field name="width">6</field>
              </block>
            </next>
          </block>
        </statement>
      </block>
    </category>

    <category name="Template examples">

      <block type="archive">
        <statement name="input">
          <block type="records">
            <statement name="item_configuration">
              <block type="item_title">
                <value name="text_style">
                  <block type="text_style">
                    <field name="font_style">normal</field>
                    <field name="font_weight">normal</field>
                    <field name="font_size">12</field>
                    <field name="alignment">left</field>
                    <field name="transformation">0</field>
                    <value name="font_family">
                      <block type="text">
                        <field name="TEXT">Arial</field>
                      </block>
                    </value>
                  </block>
                </value>
                <next>
                  <block type="item_excerpt">
                    <value name="text_style">
                      <block type="text_style">
                        <field name="font_style">normal</field>
                        <field name="font_weight">normal</field>
                        <field name="font_size">12</field>
                        <field name="alignment">left</field>
                        <field name="transformation">0</field>
                        <value name="font_family">
                          <block type="text">
                            <field name="TEXT">Arial</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </next>
            </statement>
          </block>
        </statement>
      </block>

      <block type="home">
        <value name="display_style">
          <block type="display_style">
            <value name="margins">
              <block type="content_margin">
                <value name="left_margin">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="right_margin">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="top_margin">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="bottom_margin">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
              </block>
            </value>
            <value name="padding">
              <block type="padding">
                <value name="left">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="right">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="top">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
                <value name="bottom">
                  <block type="percents">
                    <field name="percents">0</field>
                  </block>
                </value>
              </block>
            </value>
            <value name="border">
              <block type="border">
                <value name="border_width">
                  <block type="pixels">
                    <field name="pixels">0</field>
                  </block>
                </value>
              </block>
            </value>
          </block>
        </value>
        <statement name="input">
          <block type="posts">
            <field name="posts_per_page">10</field>
            <field name="show_thumbnail">TRUE</field>
            <statement name="post">
              <block type="item_title">
                <value name="text_style">
                  <block type="text_style">
                    <field name="font_style">normal</field>
                    <field name="font_weight">normal</field>
                    <field name="font_size">12</field>
                    <field name="alignment">left</field>
                    <field name="transformation">0</field>
                    <value name="font_family">
                      <block type="text">
                        <field name="TEXT">Arial</field>
                      </block>
                    </value>
                  </block>
                </value>
                <next>
                  <block type="item_content">
                    <value name="text_style">
                      <block type="text_style">
                        <field name="font_style">normal</field>
                        <field name="font_weight">normal</field>
                        <field name="font_size">12</field>
                        <field name="alignment">left</field>
                        <field name="transformation">0</field>
                        <value name="font_family">
                          <block type="text">
                            <field name="TEXT">Arial</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </next>
              </block>
            </statement>
          </block>
        </statement>
      </block>

    </category>
  </xml>

  <script>

    var workspace = Blockly.inject("blocklyDiv", {
      toolbox: document.getElementById("toolbox"),
      zoom:
         {controls: true,
          wheel: true,
          startScale: 1,
          maxScale: 3,
          minScale: 0.3,
          scaleSpeed: 1.2,
          pinch: true},
      trashcan: true
    });

    workspace.addChangeListener(onWorkspaceChange);

  </script>
  
</body>
</html>
